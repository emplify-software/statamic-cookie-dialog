<link rel="stylesheet" href="/vendor/statamic-cookie-dialog/build/parent.css">

<div id="cookie-dialog"><template shadowrootmode="open">

    <script type="module" src="/vendor/statamic-cookie-dialog/build/cookie_dialog.js"></script>
    <link rel="stylesheet" href="/vendor/statamic-cookie-dialog/build/cookie_banner.css">
    {{ partial src="cookie-dialog::utils/_dark_light_mode" }}

    {{ is_automatic_mode = (data:dark_light_mode == 'auto' || !data:dark_light_mode) }}

    {{ if data:highlight_color && (is_automatic_mode || data:dark_light_mode == 'light') }}
        <style>
            /* Toggle switch background color and accept all button background color */
            label[data-toggle-switch]:has(:checked) > .checkbox, #accept-all-btn {
                background-color: {{data:highlight_color}}!important;
                color: white!important;
            }

            [data-info-link] {
                color: {{data:highlight_color}}!important;
            }

            [data-cookie] input[type="checkbox"] {
                accent-color: {{data:highlight_color}};
            }
        </style>
    {{ /if }}

    {{ if data:highlight_color_dark && (is_automatic_mode || data:dark_light_mode == 'dark') }}
        <style>
                {{ if is_automatic_mode}} @media (prefers-color-scheme: dark) { {{ /if }}
                /* Toggle switch background color and accept all button background color */
                label[data-toggle-switch]:has(:checked) > .checkbox, #accept-all-btn {
                    background-color: {{data:highlight_color_dark}}!important;
                }

                [data-info-link] {
                    color: {{data:highlight_color_dark}}!important;
                }

                [data-cookie] input[type="checkbox"] {
                    accent-color: {{data:highlight_color_dark}};
                }
                {{ if is_automatic_mode}} } {{ /if }}
        </style>
    {{ /if }}

    <dialog {{ if enabled }} data-enabled {{ /if }} data-cookie-version="{{ data:version }}" id="cookie-dialog-inner" class="m-auto fixed max-w-full sm:max-w-xl max-h-full translate-y-10 opacity-0 transition-all duration-700 bg-transparent overflow-hidden backdrop:backdrop-blur-sm backdrop:bg-black/40 focus:outline-0">

        <div part="dialog" class="m-0 md:m-2 bg-white mx-2 max-h-[93dvh] dark:bg-gray-800 text-black backdrop-blur-md rounded-3xl relative overflow-y-auto dark:text-white">
            <div id="cookie-section-container" class="transition-all">
                <section id="cookie-main-section" class="overflow-hidden transition-all duration-150 max-h-full">
                    <div class="p-6 md:p-8">
                        <h3 part="text" class="text-3xl font-extrabold mb-5">
                            {{ trans :key="data:heading" }}
                        </h3>

                        <div part="text" class="text-gray-500 dark:text-gray-300">
                            {{ trans :key="data:description" }}
                        </div>
                        {{ if data:info_pages:imprint_link || data:info_pages:privacy_policy_link }}
                            <div class="text-gray-500 dark:text-gray-300 mt-4">
                                {{ if data:info_pages:imprint_link }}
                                    <a part="text" href="{{ (data:info_pages:imprint_link | url) ?? data:info_pages:imprint_link }}" data-info-link class="text-blue-600 dark:text-blue-400">{{ trans :key="data:info_pages:imprint_title" }}</a>
                                {{ /if }}
                                {{ if data:info_pages:imprint_link && data:info_pages:privacy_policy_link }}
                                    &nbsp;â€¢&nbsp;
                                {{ /if }}
                                {{ if data:info_pages:privacy_policy_link }}
                                    <a part="text" href="{{ (data:info_pages:privacy_policy_link | url) ?? data:info_pages:privacy_policy_link }}" data-info-link class="text-blue-600 dark:text-blue-400">{{ trans :key="data:info_pages:privacy_policy_title" }}</a>
                                {{ /if }}
                            </div>
                        {{ /if }}
                    </div>
                </section>

                <section class="flex flex-col px-6 md:px-8">

                    <div id="cookie-custom-section" class="transition-all duration-150 flex-1">
                        <ul>
                            {{ data:groups }}
                                <li class="border-gray-200 pt-5 border-b last-of-type:!border-b-0" data-cookie-group="{{ identifier }}"{{required ? " data-cookie-required" : ""}}>
                                    <div class="mb-5">
                                        <label class="w-full inline-flex items-center cursor-pointer justify-between" data-toggle-switch>
                                            <span part="text" class="font-semibold">
                                                {{ trans :key="name ?? identifier" }}
                                            </span>
                                            <input type="checkbox" class="sr-only peer" {{required || enabled_default ? " checked" : ""}}{{required ? " disabled" : ""}}>
                                            <div class="checkbox relative w-11 h-6 bg-gray-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:!bg-gray-700 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"></div>
                                        </label>
                                    </div>
                                    {{  if description }}
                                        <div part="text" data-description class="description break-words text-gray-500 dark:text-gray-200 mb-5">
                                            {{ trans :key="description" }}
                                        </div>
                                    {{  /if }}
                                    {{ if cookies | length }}
                                    <details class="mt-3 mb-5 text-sm">
                                        <summary part="text" class="cursor-pointer">
                                            {{ data:cookie_details }} <span>(<span class="cookie-count">{{ cookies | length }}</span>)</span>
                                        </summary>
                                        <ul class="flex flex-col gap-3 mt-4">
                                            {{ cookies }}
                                                <li class="text-gray-500 dark:text-gray-300" data-cookie="{{ cookie_identifier }}">
                                                    <div class="flex flex-col justify-between">
                                                        <div>
                                                            <div class="flex gap-4 items-baseline pl-4">
                                                                <div>
                                                                    <input id="checkbox-{{ cookie_identifier }}" type="checkbox" class="w-32 translate-y-[2px] w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" {{required || enabled_default ? " checked" : ""}}{{required ? " disabled" : ""}}>
                                                                </div>
                                                                <div>
                                                                    <label for="checkbox-{{ cookie_identifier }}">
                                                                        <span part="text" class="font-semibold break-words mr-4">
                                                                            {{ trans :key="cookie_name ?? cookie_identifier" }}
                                                                        </span>
                                                                        <span part="text">
                                                                            {{ if cookie_lifetime }}
                                                                                {{ trans :key="cookie_lifetime" }}
                                                                            {{ /if }}
                                                                        </span>
                                                                    </label>

                                                                    <p part="text" class="break-words">
                                                                        {{ if cookie_description }}
                                                                            {{ trans :key="cookie_description" }}
                                                                        {{ /if }}
                                                                    </p>

                                                                </div>
                                                            </div>


                                                        </div>

                                                    </div>
                                                </li>
                                            {{ /cookies }}
                                        </ul>
                                    </details>
                                    {{ /if }}
                                </li>
                            {{ /data:groups }}
                        </ul>
                    </div>

                </section>

                <section class="sticky bottom-0 bg-white dark:bg-gray-800 border-t p-6 md:p-8">
                    <div class="relative flex gap-x-4 gap-y-2 w-full flex-wrap">
                        <button part="button text" autofocus id="accept-all-btn" class="cursor-pointer text-nowrap flex-1 !outline-transparent bg-gray-700 text-white dark:bg-white dark:text-gray-700 px-6 py-2 w-max rounded-lg active:scale-[0.99]">
                            {{ trans :key="data:accept_all" }}
                        </button>
                        <button part="button text" id="save-preferences-btn" class="cursor-pointer text-nowrap flex-1 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-6 py-2 w-max rounded-lg active:scale-[0.99]">
                            {{ trans :key="data:save_preferences" }}
                        </button>
                    </div>
                </section>

                {{ if !$isProEdition }}
                    <section class="text-gray-400 dark:text-gray-500 text-center pb-6 text-sm">
                        Powered by <a class="text-gray-500 dark:text-gray-400 underline underline-offset-4" target="_blank" href="https://emplify-software.de">emplify software</a>
                    </section>
                {{ /if }}
            </div>
        </div>

    </dialog>

</template></div>